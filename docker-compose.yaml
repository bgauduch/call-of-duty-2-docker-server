version: "3.6"
services:
  cod2_server:
    # You can chose a different server version, see available image tags:
    # https://hub.docker.com/r/bgauduch/cod2server/tags
    image: bgauduch/cod2server:latest
    restart: unless-stopped
    ports:
      - "20500:20500/udp"
      - "20510:20510/udp"
      - "28960:28960/tcp"
      - "28960:28960/udp"
    volumes:
      - type: bind
        source: ./cod2server/main
        target: /home/cod2/main
        read_only: true
    # Configure server parameters and load configuration files
    command:
      [
        "+set",
        "net_port",
        "28960",
        "+set",
        "sv_cheats",
        "0",
        "+set",
        "sv_punkbuster",
        "0",
        "+exec",
        "punkbuster.cfg",
        "+exec",
        "server_mp.cfg"
      ]
    # Allow server shell interaction
    stdin_open: true
    tty: true
